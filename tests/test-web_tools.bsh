#!/usr/bin/env bash


if [ -z ${VSI_COMMON_DIR+set} ]; then
  VSI_COMMON_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.."; pwd)"
fi

source "${VSI_COMMON_DIR}/tests/testlib.bsh"
source "${TESTLIB_DIR}/test_utils.bsh"
source "${VSI_COMMON_DIR}/linux/web_tools.bsh"

begin_test "Test download to stdout"
(
  setup_test

  function wget()
  {
    return 1
  }

  function curl()
  {
    return 1
  }

  function python()
  {
    return 1
  }

  function ruby()
  {
    return 1
  }

  function perl()
  {
    return 1
  }

  not download_to_stdout https://www.example.com

  function perl()
  {
    echo "perl1"
    return 0
  }
  download_to_stdout https://www.example.com
  [ "$(download_to_stdout https://www.example.com)" = "perl1" ]

  function ruby()
  {
    echo "ruby1"
    return 0
  }
  download_to_stdout https://www.example.com
  [ "$(download_to_stdout https://www.example.com)" = "ruby1" ]

  function python()
  {
    echo "python1"
    return 0
  }
  download_to_stdout https://www.example.com
  [ "$(download_to_stdout https://www.example.com)" = "python1" ]

  function curl()
  {
    echo "curl1"
    return 0
  }
  download_to_stdout https://www.example.com
  [ "$(download_to_stdout https://www.example.com)" = "curl1" ]

  function wget()
  {
    echo "wget1"
    return 0
  }
  download_to_stdout https://www.example.com
  [ "$(download_to_stdout https://www.example.com)" = "wget1" ]
)
end_test
