===================
Container Functions
===================

.. default-domain:: bash

.. file:: container_functions.bsh

Common functionality for adding extra just features to container services

.. function:: container_environment_override

:Arguments: * ``${1}`` - The name of a function that takes two arguments, variable name and variable value, and writes to the corresponding configuration file.
:Arguments: * ``JUST_PROJECT_PREFIX`` - The Just project prefix value
            * ``JUST_DISABLE_ENVIRONMENT_SWAP`` - Transparently swap environment variables as they are added to the docker environment
            * ``EXPORT_DOCKER`` - Also exports the ``${1}_.*_DOCKER`` version of the variable when using the transparent environment variable swap feature (the swap effectively becomes a copy).

Sets up a number of environment variables to make containers behave the way we want them to

* ``JUST_HOST_WINDOWS`` - Set to ``1`` on Windows, else unset. This is primarily used in the entrypoint to remove a second slash at the beginning of environment variables that have to be placed there due to limitations in MINGW/Cygwin. These double slashes have, on occasion, caused apps to fail, so removing them becomes important.
* ``${JUST_PROJECT_PREFIX}_DOCKER`` - variables are swapped

.. seealso::

  :func:`docker_compose_override generate_docker_compose_override`
    Uses this for environment variables

